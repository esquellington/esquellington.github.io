* Player
** DONE Animation as seq of frames
** DONE Combined {idle,jump} x shoot
** DONE Jump over a wall we're next to
   - As in GnG, jump is not controllable, but if you jump right while
     next to a right wall, you jump past it
   - basically, the horizontal jump speed needs to reset every frame,
     and cancelled only when there's a collision
** TODO Hit/Death
** TODO Contextual actions (on_ground, on_wall, on_cliff, etc...)
* Collision detection
** DONE BP using map tiles as grid
** DONE CCD with sequential treatment
* Map
** Tile flags
   1: solid
   2: damage
** DONE 1 solid block type (flag 0)
** DONE room change
** TODO Scroll
* Projectiles
** DONE CCD
** DONE Hit VFX
** TODO Hit SFX
* Enemies
** Simple plans
   - Periodic: linear vel, stay, go back (ex: saws)
     - no CD except for player/bullets
   - Patrol: Forward until collision, then turn (ex: worm)
     - do not fall off cliffs, do not even go to the border
   - Charge: Wait until player visible/close, then walk towards it
   - Fly: Wait until player visible/close, then fly straight and disappear
   - Fall: fall down on player when below
   - Fly and Seek: Go towards player, no map collisions
** DONE Worm
   - Patrol
** DONE Angry worm
   - Patrol faster
** DONE Mouse
   - Patrol
** DONE Grunt
   - Charge
   - Fixed timeout between attacks can be any time, no need to be
     exact idle duration
   - Hit ground shoots wave projectile both ways
** DONE Cthulhu
*** DONE Patrol
*** DONE Shoot periodically if player at same level
** TODO Spit
   - It's a projectile implemented as an enemy
   - Should hit walls
** DONE Bird
   - Fly directly when inside inner radius, stop when outside radius
     and retarget
** DONE Arachno
   - Patrol
   - Jump on player at fixed angle
     - 45 deg trivial solution
   - Low grav to reduce jump speed
** DONE Teeth
   - Patrol fast
   - Indestructible
** TODO Skeleton:
   - Gen skulls periodically
** TODO Skull
   - Fly straight
   - Fly in sinusoid
** DONE Saw
   - place properly acc to range
   - hitbox less unforgiving
   - inverse version
** DONE Stalactite
   - fall when player below
   - Just let it disappear out of room, no need to CD
   - remove from map permanently
     - FLAG enemies as "persistent" and if true, remember map cell
       they were created from and overwrite it with contents from cell above
** TODO Boss: Skull Executioner
   - Jump over
   - Open mouth and shoot skulls
     - Parabolic
     - Straight
** TODO Boss: Flame Executioner
   - Charge
   - Throw parabolic flames that stick to the ground for a while
** TODO Boss: UnderKing
   - Fly around
     - Player must shoot when at accessible height
   - Directed bullets
     - Player must avoid
   - Global bullet rain
     - Player must cover under rocks patrolled by indestructible enemies
   - Slam ground and create shockwaves (the ones originally for the
     Grunt)
     - Player Must jump over
** TODO Boss: Caterpillar nest
   - Normal caterpillars dig into room from ground, walls, ceiling,
     convert to angry and attack.
** TODO Boss: Rocks falling
   - Rocks fall from ceiling and stack up
   - Some can be destroyed
   - Like puzzle platformer
** TODO Boss: Spider room
   - Spiders patrol on walls and jump on player randomly
   - Extend jump_on_ground to accept work with different heights
* FX
  - Rain/Snow pixels
  - Lightning/Flashing screen at startup
  - Screen-shake on impact
    - Move camera with noise
  - Death/Evaporate
    - Gen flashing white pixels that fade up/directionally to impact)
  - Dark areas using flickering/dither
* BUGS
** TODO Shoot repetition if direction pressed
** TODO Stop idle/run movement while falling
* FW
** TODO RLE map
   - Save in code-string or in map-memory
** TODO RLE anims
   - list of key + repetitions
** TODO Generic animation system
    - Allow 1 cycle + 1 optional action
    - Rename Action to Cycle
    - Actions end automatically
    - Cycles repeat automatically
    - Action/Cycle are Animations and have explicit list of frames {1,2,...}
    - Transition table/FSA
      - States x {Inputs + Events}
      - States: Idle,Run,Jump...
        - OnEntwr/OnExit
      - Inputs: LRUDZX
      - Events: EndAnim,Hit...

* Post JnG
** BringMeTheLargestSwordYouCanFind
   - Pico8 prototype
   - Reuse block-based platformer code
   - Add vertical stairs
   - Add sword parabolic throw
   - Reuse on-ground enemy AI
   - Add vertical scroll
